<?xml version="1.0"?>
<!DOCTYPE module PUBLIC "-//Puppy Crawl//DTD Check Configuration 1.3//EN" "http://www.puppycrawl.com/dtds/configuration_1_3.dtd">

<!--
    Checkstyle configuration that checks if a bundle is matching the Coding Guidelines in the Eclipse SmartHome project.

    For more information about the guidelines see - http://www.eclipse.org/smarthome/documentation/development/guidelines.html.

    Note that some of the required checks may be provided by some of the other plugins used in the Static Code Analysis tool.
 -->

<module name="Checker">
  <module name="NewlineAtEndOfFile">
    <property name="severity" value="info"/>
    <type value="java"/>
  </module>

  <module name="org.openhab.tools.analysis.checkstyle.ExportInternalPackageCheck">
    <property name="severity" value="error" />
    <type value="manifest"/>
  </module>
    
  <module name="org.openhab.tools.analysis.checkstyle.ManifestExternalLibrariesCheck">
    <property name="severity" value="error" />
    <type value="manifest"/>
  </module>
  
  <module name="org.openhab.tools.analysis.checkstyle.BuildPropertiesExternalLibrariesCheck">
    <property name="severity" value="error" />
    <type value="properties"/>
  </module>
  
  <module name="org.openhab.tools.analysis.checkstyle.OutsideOfLibExternalLibrariesCheck">
    <property name="severity" value="error" />
    <property name="ignoredDirectories" value="target,bin" />
    <type value="properties"/>
  </module>
  
  <module name="org.openhab.tools.analysis.checkstyle.readme.MarkdownCheck">
    <property name="severity" value="warning" />
    <type value="properties"/>
    <type value="markdown"/>
  </module>

  <module name="org.openhab.tools.analysis.checkstyle.RequireBundleCheck">
      <property name="severity" value="error" />
      <property name="allowedRequireBundles" value="${checkstyle.requireBundleCheck.allowedBundles}" default="org.junit,org.mockito,org.hamcrest" />
      <type value="manifest"/>
   </module>

   <module name="org.openhab.tools.analysis.checkstyle.AboutHtmlCheck">
     <property name="severity" value="error" />
     <property name="validAboutHtmlFileURL" value="${checkstyle.aboutHtmlCheck.url}" default="https://raw.githubusercontent.com/openhab/openhab2-addons/master/src/etc/about.html" />
     <type value="html"/>
     <type value="properties"/>
   </module>

  <module name="org.openhab.tools.analysis.checkstyle.BundleVendorCheck">
    <property name="severity" value="warning" />
    <property name="allowedValues" value="${checkstyle.bundleVendorCheck.allowedValues}" default="openHAB"/>
    <type value="manifest"/>
  </module>

  <module name="org.openhab.tools.analysis.checkstyle.ManifestJavaVersionCheck">
    <property name="severity" value="warning" />
    <property name="allowedValues" value="JavaSE-1.8"/>
    <type value="manifest"/>
  </module>
  
   <module name="org.openhab.tools.analysis.checkstyle.ManifestLineLengthCheck">
  	<property name="severity" value="warning" />
  	<type value="manifest"/>
  </module>
   
  <module name="org.openhab.tools.analysis.checkstyle.BuildPropertiesCheck">
    <property name="severity" value="warning" />
    <!-- Other bin.includes values will be checked from a specific Checks (e.g.ServiceComponentManifestCheck) -->
    <!-- The bin.includes values must end with the "/" character -->
    <property name="expectedBinIncludesValues" value="META-INF/,." />
    <!-- output.. and source.. properties allow skipping the "/" character at the end of the value -->
    <property name="possibleOutputValues" value="target/classes,target/test-classes" />
    <property name="possibleSourceValues" value="src/main/java,src/main/resources,src/test/java,src/test/resources,src/main/groovy,src/test/groovy" />
    <type value="properties"/>
  </module>
   
  <module name="org.openhab.tools.analysis.checkstyle.ServiceComponentManifestCheck">
    <property name="severity" value="error" />
    <type value="manifest"/>
    <type value="properties"/>
  </module>

  <module name="org.openhab.tools.analysis.checkstyle.ImportExportedPackagesCheck">
    <property name="severity" value="warning" />
    <type value="manifest"/>
  </module>
  
  <module name="org.openhab.tools.analysis.checkstyle.ManifestPackageVersionCheck">
     <property name="severity" value="warning" />
     <property name="ignoreImportedPackages" value="org.junit.*"/>
     <type value="manifest"/>
  </module>
   
  <module name="org.openhab.tools.analysis.checkstyle.EshInfXmlValidationCheck">
    <property name="severity" value="error" />
    <property name="thingSchema" value="http://eclipse.org/smarthome/schemas/thing-description-1.0.0.xsd" />
    <property name="bindingSchema" value="http://www.eclipse.org/smarthome/schemas/binding-1.0.0.xsd" />
    <property name="configSchema" value="http://www.eclipse.org/smarthome/schemas/config-description-1.0.0.xsd" />
    <type value="manifest"/>
    <type value="properties"/>
  </module>

  <module name="org.openhab.tools.analysis.checkstyle.PomXmlCheck">
    <property name="severity" value="error" />
    <property name="manifestVersionRegularExpression" value="${checkstyle.pomXmlCheck.currentVersionRegex}" default="^2\.3\.0"/>
    <type value="properties"/>
    <type value="manifest"/>
  </module>
</module>
